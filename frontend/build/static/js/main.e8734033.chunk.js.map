{"version":3,"sources":["components/Card.jsx","contexts/CurrentUserContext.js","images/logo.svg","components/Header.jsx","components/Footer.jsx","components/Main.jsx","components/PopupWithForm.jsx","hooks/useFormWithValidation.js","components/EditProfilePopup.jsx","components/AddPlacePopup.jsx","components/EditAvatarPopup.jsx","components/ImagePopup.jsx","components/Login.jsx","images/signup-modal-result-fail.svg","images/signup-modal-result-success.svg","components/InfoTooltip.jsx","components/Register.jsx","components/ProtectedRoute.jsx","utils/constants.js","utils/Api.js","utils/auth.js","components/App.jsx","index.js"],"names":["Card","React","memo","props","isOwner","card","owner","currentUser","id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","className","src","link","alt","name","onClick","onCardClick","type","aria-label","onCardLike","length","onCardDelete","CurrentUserContext","createContext","Header","headerLink","useContext","page","to","email","handleSignOut","logo","Footer","Main","jwt","localStorage","getItem","useEffect","renderCards","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","item","_id","PopupWithForm","title","submitButtonText","isOpen","onClose","onSubmit","isSubmitDisabled","children","action","method","noValidate","disabled","useForm","useState","values","setValues","errors","setErrors","isFormValid","setIsFormValid","resetForm","useCallback","newValues","newErrors","newIsFormValid","handleInputChange","evt","target","value","validationMessage","closest","checkValidity","EditProfilePopup","useFormWithValidation","e","preventDefault","onUpdateUser","placeholder","required","minLength","maxLength","autoComplete","onChange","AddPlacePopup","place","EditAvatarPopup","inputRef","useRef","submitButtonState","onUpdateAvatar","avatarUrl","current","ref","ImagePopup","Login","password","userData","setUserData","handleLogin","InfoTooltip","resultImg","resultText","signupResult","resultSuccess","resultFail","Register","handleSignup","trim","isSignupModalOpen","ProtectedRoute","Component","component","exact","path","loggedIn","BASE_URL","api","url","this","_url","res","ok","json","Promise","reject","status","statusText","info","fetch","headers","authorization","body","JSON","stringify","then","_checkErrors","token","cardId","resCheck","App","setCurrentUser","setLoggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","editSubmitButtonText","seteditSubmitButtonText","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","avatarUpdateSubmitButtonState","setAvatarUpdateSubmitButtonState","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setCards","isAddPlacePopupOpen","setIsAddPlacePopupOpen","addCardSubmitButtonText","setAddCardSubmitButtonText","closeAllPopups","history","useHistory","setIsSignupModalOpen","setSignupResult","setResultText","tokenCheck","user","push","catch","err","console","error","handleModalCloseByEsc","key","document","addEventListener","removeEventListener","Provider","auth","setItem","getCards","reverse","find","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","removeItem","data","updateUser","finally","createCard","updateUserAvatar","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.e8734033.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Card = React.memo((props) => {\r\n  const isOwner = props.card.owner === props.currentUser.id;\r\n  const cardDeleteButtonClassName = `photo-elements__delete-button ${!isOwner && 'photo-elements__delete-button_hidden'}`;\r\n\r\n  const isLiked = props.card.likes.some((i) => i === props.currentUser.id);\r\n  const cardLikeButtonClassName = `photo-elements__like-button ${isLiked && 'photo-elements__like-button_active'}`;\r\n\r\n  const handleCardClick = () => {\r\n    props.onCardClick(props.card);\r\n  };\r\n\r\n  return (\r\n    <li className='photo-elements__item'>\r\n      <img\r\n        className='photo-elements__image'\r\n        src={props.card.link}\r\n        alt={props.card.name}\r\n        onClick={handleCardClick}\r\n      />\r\n\r\n      <div className='photo-elements__caption'>\r\n        <h2 className='photo-elements__text'>{props.card.name}</h2>\r\n        <div className='photo-elements__like-container'>\r\n          <button\r\n            className={cardLikeButtonClassName}\r\n            type='button'\r\n            aria-label='Нравится'\r\n            onClick={()=> {\r\n              props.onCardLike(props.card);\r\n            }}\r\n          ></button>\r\n          <p className='photo-elements__like-counter'>\r\n            {props.card.likes.length}\r\n          </p>\r\n        </div>\r\n        <button\r\n          className={cardDeleteButtonClassName}\r\n          type='button'\r\n          aria-label='Удалить'\r\n          onClick={() => {\r\n            props.onCardDelete(props.card);\r\n          }}\r\n        ></button>\r\n      </div>\r\n    </li>\r\n  );\r\n});\r\n\r\nexport default Card;\r\n","import React from 'react';\r\n// import profilePhoto from '../images/profile-photo.jpg';\r\n\r\nexport const CurrentUserContext = React.createContext()","export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import React, { useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\nimport logo from '../images/logo.svg';\r\n\r\nconst Header = (props) => {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  let headerLink;\r\n\r\n  if (props.page === 'signin') {\r\n    headerLink = <Link to='/signup' className='header__link'>Регистрация</Link>\r\n  } else if (props.page === 'signup') {\r\n    headerLink = <Link to='/signin' className='header__link'>Войти</Link>\r\n  } else if (props.page === 'feed') {\r\n    headerLink = \r\n    <nav className='header__nav'>\r\n      <p className=\"header__info\">{currentUser.email}</p>\r\n      <Link to='/login' className='header__link header__link_signout' onClick={props.handleSignOut}>Выйти</Link>\r\n    </nav>\r\n  }\r\n\r\n  return (\r\n    <header className='header'>\r\n      <img src={logo} alt='логотип место' className='header__logo' />\r\n      {headerLink}\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nconst Footer = (props) => {\r\n  return (\r\n    <footer className='footer'>\r\n      <p className='footer__copyright'>&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","import React, { useContext, useEffect } from 'react';\r\nimport Card from './Card.jsx';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\nimport Header from './Header.jsx';\r\nimport Footer from './Footer.jsx';\r\n\r\nconst Main = (props) => {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const jwt = localStorage.getItem('jwt');\r\n\r\n  useEffect(() => {\r\n    props.renderCards(jwt);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Header page='feed' handleSignOut={props.handleSignOut} />\r\n      <main className='main'>\r\n        <section className='profile'>\r\n          <div className='profile__photo-container' onClick={props.onEditAvatar}>\r\n            <img src={currentUser.avatar} alt='фото профиля' className='profile__photo' />\r\n          </div>\r\n\r\n          <div className='profile__info'>\r\n            <div className='profile__title'>\r\n              <h1 className='profile__name'>{currentUser.name}</h1>\r\n              <button\r\n                className='profile__edit-button'\r\n                type='button'\r\n                aria-label='Редактировать'\r\n                onClick={props.onEditProfile}\r\n              ></button>\r\n            </div>\r\n\r\n            <p className='profile__description'>{currentUser.about}</p>\r\n          </div>\r\n\r\n          <button\r\n            className='profile__add-button'\r\n            type='button'\r\n            aria-label='Добавить'\r\n            onClick={props.onAddPlace}\r\n          ></button>\r\n        </section>\r\n\r\n        <section className='photo-elements'>\r\n          <ul className='photo-elements__list'>\r\n            {props.cards.map((item) => {\r\n              return (\r\n                <Card\r\n                  card={item}\r\n                  key={item._id}\r\n                  currentUser={props.currentUser}\r\n                  onCardClick={props.onCardClick}\r\n                  onCardLike={props.onCardLike}\r\n                  onCardDelete={props.onCardDelete}\r\n                />\r\n              );\r\n            })}\r\n          </ul>\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nconst PopupWithForm = ({\r\n  name,\r\n  title,\r\n  submitButtonText,\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  isSubmitDisabled = false,\r\n  children,\r\n}) => {\r\n  return (\r\n    <div className={`modal ${name} ${isOpen ? 'modal_opened' : ''}`}>\r\n      <div className='modal__container'>\r\n        <h2 className='modal__title'>{title}</h2>\r\n\r\n        <form\r\n          action='#'\r\n          name={`form-${name}`}\r\n          className='modal__form'\r\n          method='POST'\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n        >\r\n          {children}\r\n          <button type='submit' className={`modal__button ${isSubmitDisabled && 'modal__button_disabled'}`} disabled={isSubmitDisabled}>\r\n            {submitButtonText}\r\n          </button>\r\n        </form>\r\n\r\n        <button\r\n          className='modal__close-button'\r\n          type='button'\r\n          aria-label='Закрыть'\r\n          onClick={onClose}\r\n        ></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import { useCallback, useState } from 'react';\r\n\r\nexport default function useForm() {\r\n  const [values, setValues] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isFormValid, setIsFormValid] = useState(false);\r\n\r\n  const handleInputChange = (evt) => {\r\n    const target = evt.target;\r\n    const { name, value } = target;\r\n\r\n    setValues({ ...values, [name]: value });\r\n    setErrors({ ...errors, [name]: target.validationMessage });\r\n    setIsFormValid(target.closest('form').checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsFormValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsFormValid(newIsFormValid);\r\n    },\r\n    [setValues, setErrors, setIsFormValid]\r\n  );\r\n\r\n  return { values, setValues, handleInputChange, errors, isFormValid, resetForm };\r\n}\r\n","import React, { useEffect, useContext } from 'react';\r\nimport PopupWithForm from './PopupWithForm.jsx';\r\nimport useFormWithValidation from '../hooks/useFormWithValidation.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nconst EditProfilePopup = (props) => {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  // const { values, setValues, handleInputChange } = useForm();\r\n  const { values, setValues, handleInputChange, errors, isFormValid, resetForm } = useFormWithValidation();\r\n  \r\n  const handleEditSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    props.onUpdateUser({\r\n      name: values.name,\r\n      about: values.about,\r\n    });\r\n  };\r\n  \r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      resetForm(currentUser);\r\n    }\r\n    \r\n    setValues({\r\n      name: currentUser.name,\r\n      about: currentUser.about,\r\n    });\r\n  }, [currentUser, props.isOpen, resetForm]);\r\n  \r\n  return (\r\n    <PopupWithForm\r\n      name='edit-modal'\r\n      title='Редактировать профиль'\r\n      submitButtonText={props.submitButtonText}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleEditSubmit}\r\n      isSubmitDisabled={!isFormValid}\r\n      children={\r\n        <>\r\n          <input\r\n            type='text'\r\n            name='name'\r\n            id='profile-name-input'\r\n            placeholder='Ваше имя'\r\n            className='modal__input'\r\n            required\r\n            minLength='2'\r\n            maxLength='40'\r\n            autoComplete='off'\r\n            value={values.name || ''}\r\n            onChange={handleInputChange}\r\n          />\r\n          <p className={`modal__input-error-message ${errors.name && 'modal__input-error-message_visible'}`} id='profile-name-error'>{errors.name || ''}</p>\r\n          <input\r\n            type='text'\r\n            name='about'\r\n            id='profile-job-input'\r\n            placeholder='Ваша профессия'\r\n            className='modal__input'\r\n            required\r\n            minLength='2'\r\n            maxLength='200'\r\n            autoComplete='off'\r\n            value={values.about || ''}\r\n            onChange={handleInputChange}\r\n          />\r\n          <p className={`modal__input-error-message ${errors.about && 'modal__input-error-message_visible'}`} id='profile-job-error'>{errors.about || ''}</p>\r\n        </>\r\n      }\r\n    />\r\n  );\r\n};\r\nexport default EditProfilePopup;\r\n","import React, { useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm.jsx';\r\n// import useForm from '../hooks/useForm.js';\r\nimport useFormWithValidation from '../hooks/useFormWithValidation.js';\r\n\r\nconst AddPlacePopup = (props) => {\r\n  // const { values, setValues, handleInputChange } = useForm();\r\n  const { values, setValues, handleInputChange, errors, isFormValid, resetForm } = useFormWithValidation();\r\n\r\n  const handleAddPlaceSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    props.onAddPlace({\r\n      name: values.place,\r\n      link: values.link,\r\n    });\r\n\r\n    resetForm();\r\n  };\r\n\r\n  useEffect(() => {\r\n    resetForm();\r\n  }, [props.isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name='add-modal'\r\n      title='Новое место'\r\n      submitButtonText={props.submitButtonText}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleAddPlaceSubmit}\r\n      isSubmitDisabled={!isFormValid}\r\n      children={\r\n        <>\r\n          <input\r\n            type='text'\r\n            name='place'\r\n            id='place-name-input'\r\n            placeholder='Название'\r\n            className='modal__input'\r\n            required\r\n            minLength='1'\r\n            maxLength='30'\r\n            autoComplete='off'\r\n            value={values.place || ''}\r\n            onChange={handleInputChange}\r\n          />\r\n          <p className={`modal__input-error-message ${errors.place && 'modal__input-error-message_visible'}`} id='place-name-error'>{errors.place}</p>\r\n\r\n          <input\r\n            type='url'\r\n            name='link'\r\n            id='place-link-input'\r\n            placeholder='Ссылка на картинку'\r\n            className='modal__input'\r\n            required\r\n            value={values.link || ''}\r\n            onChange={handleInputChange}\r\n          />\r\n          <p className={`modal__input-error-message ${errors.link && 'modal__input-error-message_visible'}`} id='place-link-error'>{errors.link}</p>\r\n        </>\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default AddPlacePopup;\r\n","import React, { useRef } from 'react';\r\nimport PopupWithForm from './PopupWithForm.jsx'\r\n\r\nconst EditAvatarPopup = (props) => {\r\n  const inputRef = useRef();\r\n  const handleAvatarUpdateSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    props.onUpdateAvatar({\r\n      avatarUrl: inputRef.current.value,\r\n    });\r\n    inputRef.current.value = '';\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n        name='avatar-update-modal'\r\n        title='Обновить аватар'\r\n        submitButtonState={props.submitButtonState}\r\n        isOpen={props.isOpen}\r\n        onClose={props.onClose}\r\n        onSubmit={handleAvatarUpdateSubmit}\r\n        children={\r\n          <>\r\n            <input\r\n              ref={inputRef}\r\n              type='url'\r\n              name='avatar-link'\r\n              id='avatar-link-input'\r\n              placeholder='Ссылка на картинку'\r\n              className='modal__input'\r\n              required\r\n            />\r\n            <p\r\n              className='modal__input-error-message'\r\n              id='avatar-link-error'\r\n            ></p>\r\n          </>\r\n        }\r\n      />\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\n\r\nconst ImagePopup = (props) => {\r\n  return (\r\n    <div className={`${props.name} ${props.isOpen ? 'pic-modal_opened' : ''}`}>\r\n      <div className='pic-modal__container'>\r\n        <figure className='pic-modal__picture'>\r\n          <img src={props.card.link} alt={props.card.name} className='pic-modal__image' />\r\n          <figcaption className='pic-modal__caption'>{props.card.name}</figcaption>\r\n        </figure>\r\n\r\n        <button\r\n          className='pic-modal__close-button'\r\n          type='button'\r\n          aria-label='Закрыть'\r\n          onClick={props.onClose}\r\n        ></button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImagePopup;\r\n","import React, { useState } from 'react';\r\nimport Header from './Header.jsx';\r\n\r\nconst Login = (props) => {\r\n  const [userData, setUserData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUserData({\r\n      ...userData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const { email, password } = userData;\r\n    props.handleLogin(email, password);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header page='signin' />\r\n      <div className='login'>\r\n        <div className='login__containter'>\r\n          <h1 className='login__title'>Вход</h1>\r\n          <form onSubmit={handleSubmit}>\r\n            <input\r\n              type='email'\r\n              name='email'\r\n              className='login__input'\r\n              placeholder='Email'\r\n              value={userData.email}\r\n              onChange={handleInputChange}\r\n            />\r\n            <input\r\n              type='password'\r\n              name='password'\r\n              className='login__input'\r\n              placeholder='Пароль'\r\n              value={userData.password}\r\n              onChange={handleInputChange}\r\n            />\r\n            <div className='login__button-containter'>\r\n              <button type='submit' className='login__button'>\r\n                Войти\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","export default __webpack_public_path__ + \"static/media/signup-modal-result-fail.d4ce2a26.svg\";","export default __webpack_public_path__ + \"static/media/signup-modal-result-success.a9eb6caf.svg\";","import React from 'react';\r\nimport resultFail from '../images/signup-modal-result-fail.svg';\r\nimport resultSuccess from '../images/signup-modal-result-success.svg';\r\n\r\nconst InfoTooltip = (props) => {\r\n  let resultText = props.resultText;\r\n  let resultImg;\r\n\r\n  if (props.signupResult === true) {\r\n    resultImg = resultSuccess;\r\n  } else {\r\n    resultImg = resultFail;\r\n  }\r\n  return (\r\n    <div className={`signup-modal ${props.isOpen ? 'signup-modal_opened' : ''}`}>\r\n      <div className='signup-modal__container'>\r\n        <img src={resultImg} alt='картинка результата' className='signup-modal__img' />\r\n        <p className='signup-modal__text'>{resultText}</p>\r\n        <button className='signup-modal__close-button' onClick={props.onClose} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InfoTooltip;\r\n","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header.jsx';\r\nimport InfoTooltip from './InfoTooltip.jsx';\r\n\r\nconst Register = (props) => {\r\n  const [userData, setUserData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  \r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUserData({\r\n      ...userData,\r\n      [name]: value,\r\n    });\r\n  };\r\n  \r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    const { email, password } = userData;\r\n    props.handleSignup(email, password.trim());\r\n  };  \r\n\r\n  return (\r\n    <>\r\n      <Header page='signup' />\r\n      <div className='login'>\r\n        <div className='login__containter'>\r\n          <h1 className='login__title'>Регистрация</h1>\r\n          <form onSubmit={handleSubmit} className='login__form'>\r\n            <input\r\n              id='email'\r\n              name='email'\r\n              type='email'\r\n              className='login__input'\r\n              placeholder='Email'\r\n              value={userData.email}\r\n              onChange={handleInputChange}\r\n            />\r\n            <input\r\n              id='password'\r\n              name='password'\r\n              type='password'\r\n              className='login__input'\r\n              placeholder='Пароль'\r\n              value={userData.password}\r\n              onChange={handleInputChange}\r\n            />\r\n\r\n            <button type='submit' className='login__button'>\r\n              Зарегистрироваться\r\n            </button>\r\n          </form>\r\n        </div>\r\n\r\n        <div className='login__button-containter'>\r\n          <div className='login__button-caption'>\r\n            <span>Уже зарегистрированы?</span>\r\n            <Link to='/signin' className='login__link'>\r\n              Войти\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <InfoTooltip signupResult={props.signupResult} isOpen={props.isSignupModalOpen} onClose={props.onClose} resultText={props.resultText} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <>\r\n      <Route exact path={props.path}>\r\n        {() =>\r\n          props.loggedIn ? <Component {...props} /> : <Redirect to='/login' />\r\n        }\r\n      </Route>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","export const BASE_URL = 'https://api.krylov.students.nomoredomains.work'\r\n","import { BASE_URL } from \"./constants\";\r\n\r\nclass Api {\r\n  constructor({ url }) {\r\n    this._url = url;\r\n  }\r\n  /**\r\n   * checking on errors: if a fetch is ok, returns json, if not shows an error\r\n   */\r\n  _checkErrors(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(\r\n        `Something is wrong: 4 8 15 16 23 42 && ${res.status} ${res.statusText}`\r\n      );\r\n    }\r\n  }\r\n  /**\r\n   * editing user profile info on the server\r\n   */\r\n  updateUser(info) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        name: info.name,\r\n        about: info.about,\r\n      }),\r\n    }).then(this._checkErrors);\r\n  }\r\n  /**\r\n   * updating profile avatar on the server\r\n   */\r\n  updateUserAvatar({ avatarUrl }) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        avatarUrl,\r\n      }),\r\n    }).then(this._checkErrors);\r\n  }\r\n  /**\r\n   * getting cards from the server\r\n   */\r\n  getCards(token) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }).then(this._checkErrors);\r\n  }\r\n  /**\r\n   * adding a new card to the server\r\n   */\r\n  createCard({ name, link }) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        name,\r\n        link,\r\n      }),\r\n    }).then(this._checkErrors);\r\n  }\r\n  /**\r\n   * removing a card from the server\r\n   */\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }).then(this._checkErrors);\r\n  }\r\n  /**\r\n   * @description this method sends a fetch request adding or removing like depending on whether a card is liked or not\r\n   * @param {*} cardId is used to identify a card that is to changed\r\n   * @param {*} isLiked is used to identify whether a card is liked or not\r\n   */\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    if (isLiked) {\r\n      return fetch(`${this._url}/cards/${cardId}/likes`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      }).then(this._checkErrors);\r\n    } else {\r\n      return fetch(`${this._url}/cards/${cardId}/likes`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      }).then(this._checkErrors);\r\n    }\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  url: BASE_URL,\r\n});\r\nexport default api;\r\n","import { BASE_URL } from \"./constants\";\r\n\r\nconst resCheck = (res) => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n\r\nexport const signup = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      email,\r\n      password,\r\n    }),\r\n  })\r\n    .then(resCheck);\r\n};\r\n\r\nexport const signin = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      email,\r\n      password,\r\n    }),\r\n  })\r\n    .then(resCheck);\r\n}\r\n\r\nexport const getCurrentUserInfo = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\" : `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(resCheck);\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport Main from './Main.jsx';\r\nimport EditProfilePopup from './EditProfilePopup.jsx';\r\nimport AddPlacePopup from './AddPlacePopup.jsx';\r\nimport EditAvatarPopup from './EditAvatarPopup.jsx';\r\nimport ImagePopup from './ImagePopup.jsx';\r\nimport Login from './Login.jsx';\r\nimport Register from './Register.jsx';\r\nimport ProtectedRoute from './ProtectedRoute.jsx';\r\nimport api from '../utils/Api.js';\r\nimport * as auth from '../utils/auth.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\nimport { Redirect, Route, Switch, useHistory } from 'react-router-dom';\r\n\r\nconst App = () => {\r\n  /**\r\n   * user states\r\n   */\r\n  const [currentUser, setCurrentUser] = useState({\r\n    name: '',\r\n    email: '',\r\n    about: '',\r\n    avatar: '',\r\n    id: '',\r\n  });\r\n\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  /**\r\n   * profile editing\r\n   */\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [editSubmitButtonText, seteditSubmitButtonText] = useState('Сохранить');\r\n\r\n  const openEditProfileModal = () => {\r\n    setIsEditProfilePopupOpen(true);\r\n  };\r\n\r\n  const handleUpdateUser = (data) => {\r\n    seteditSubmitButtonText('Сохранение...');\r\n    api\r\n      .updateUser(data)\r\n      .then((res) => {\r\n        const { name, about } = res;\r\n        setCurrentUser({\r\n          ...currentUser,\r\n          name,\r\n          about,\r\n        });\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.error(err))\r\n      .finally(() => {\r\n        seteditSubmitButtonText('Сохранить');\r\n      });\r\n  };\r\n  /**\r\n   * avatar updating\r\n   */\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [avatarUpdateSubmitButtonState, setAvatarUpdateSubmitButtonState] = useState('Сохранить');\r\n\r\n  const openEditAvatarModal = () => {\r\n    setIsEditAvatarPopupOpen(true);\r\n  };\r\n\r\n  const handleUpdateAvatar = ({ avatarUrl }) => {\r\n    setAvatarUpdateSubmitButtonState('Сохранение...');\r\n    api\r\n      .updateUserAvatar({ avatarUrl })\r\n      .then((res) => {\r\n        const { avatar } = res;\r\n        setCurrentUser({ ...currentUser, avatar });\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.error(err))\r\n      .finally(() => {\r\n        setAvatarUpdateSubmitButtonState('Сохранить');\r\n      });\r\n  };\r\n  /**\r\n   * cards\r\n   */\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  /**\r\n   * new card adding\r\n   */\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [addCardSubmitButtonText, setAddCardSubmitButtonText] = useState('Сохранить');\r\n\r\n  const openAddPlaceModal = () => {\r\n    setIsAddPlacePopupOpen(true);\r\n  };\r\n\r\n  const handleAddPlace = (data) => {\r\n    setAddCardSubmitButtonText('Сохранение...');\r\n    api\r\n      .createCard({\r\n        name: data.name,\r\n        link: data.link,\r\n      })\r\n      .then((res) => {\r\n        setCards([res, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.error(err))\r\n      .finally(() => {\r\n        setAddCardSubmitButtonText('Сохранить');\r\n      });\r\n  };\r\n\r\n  const handleCardLike = (card) => {\r\n    const isLiked = card.likes.find((item) => item === currentUser.id);\r\n    api\r\n      .changeLikeCardStatus(card._id, isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  const handleCardDelete = (card) => {\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(() => {\r\n        const newCards = cards.filter((item) => item._id !== card._id);\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n    setIsImagePopupOpen(true);\r\n  };\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsImagePopupOpen(false);\r\n  };\r\n  /**\r\n   * signup / login functionality\r\n   */\r\n  const history = useHistory();\r\n  const handleLogin = (email, password) => {\r\n    auth\r\n      .signin(email, password)\r\n      .then((res) => {\r\n        const { name, email, about, avatar, id } = res;\r\n        if (res.token) {\r\n          localStorage.setItem('jwt', res.token);\r\n          setCurrentUser({\r\n            name,\r\n            email,\r\n            about,\r\n            avatar,\r\n            id,\r\n          });\r\n          tokenCheck();\r\n        }\r\n      })\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  const [isSignupModalOpen, setIsSignupModalOpen] = useState(false);\r\n  const [signupResult, setSignupResult] = useState(false);\r\n  const [resultText, setResultText] = useState('');\r\n\r\n  const closeSignupModal = () => {\r\n    if (signupResult) {\r\n      setIsSignupModalOpen(false);\r\n      setResultText('');\r\n      history.push('/signin');\r\n    } else {\r\n      setIsSignupModalOpen(false);\r\n      setResultText('');\r\n    }\r\n  };\r\n\r\n  const handleSignup = (email, password) => {\r\n    auth\r\n      .signup(email, password)\r\n      .then(() => {\r\n        setSignupResult(true);\r\n        setResultText('Вы успешно зарегистрировались!');\r\n        setIsSignupModalOpen(true);\r\n      })\r\n      .catch((err) => {\r\n        setResultText('Что-то пошло не так! Попробуйте ещё раз.');\r\n        setIsSignupModalOpen(true);\r\n        console.error(err);\r\n      });\r\n  };\r\n  /**\r\n   * checking jwt token when reloading page\r\n   */\r\n  const tokenCheck = () => {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if (jwt) {\r\n      auth\r\n        .getCurrentUserInfo(jwt)\r\n        .then((user) => {\r\n          if (user) {\r\n            const { name, email, about, avatar, _id } = user;\r\n            setCurrentUser({\r\n              name,\r\n              email,\r\n              about,\r\n              avatar,\r\n              id: _id,\r\n            });\r\n            setLoggedIn(true);\r\n            history.push('/feed');\r\n          }\r\n        })\r\n        .catch((err) => console.error(err));\r\n    }\r\n  };\r\n\r\n  const handleSignOut = () => {\r\n    localStorage.removeItem('jwt');\r\n    setCurrentUser({\r\n      name: '',\r\n      email: '',\r\n      about: '',\r\n      avatar: '',\r\n      id: '',\r\n    });\r\n    setLoggedIn(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    tokenCheck();\r\n  }, []);\r\n\r\n  const handleModalCloseByEsc = (evt) => {\r\n    if (evt.key === 'Escape') {\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', handleModalCloseByEsc);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleModalCloseByEsc);\r\n    }\r\n  }, []);\r\n\r\n  const renderCards = (jwt) => api.getCards(jwt).then((cards) => setCards(cards.reverse()));\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <Switch>\r\n        <Route exact path='/signin'>\r\n          <Login handleLogin={handleLogin} />\r\n        </Route>\r\n\r\n        <Route exact path='/signup'>\r\n          <Register\r\n            handleSignup={handleSignup}\r\n            signupResult={signupResult}\r\n            isSignupModalOpen={isSignupModalOpen}\r\n            onClose={closeSignupModal}\r\n            resultText={resultText}\r\n          />\r\n        </Route>\r\n\r\n        <ProtectedRoute\r\n          path='/feed'\r\n          component={Main}\r\n          loggedIn={loggedIn}\r\n          currentUser={currentUser}\r\n          onEditProfile={openEditProfileModal}\r\n          onAddPlace={openAddPlaceModal}\r\n          onEditAvatar={openEditAvatarModal}\r\n          onCardClick={handleCardClick}\r\n          cards={cards}\r\n          renderCards={renderCards}\r\n          onCardLike={handleCardLike}\r\n          onCardDelete={handleCardDelete}\r\n          handleSignOut={handleSignOut}\r\n        />\r\n\r\n        <Route exact path='/'>\r\n          {loggedIn ? <Redirect to='/feed' /> : <Redirect to='/signin' />}\r\n        </Route>\r\n\r\n        <Route path='/*'>{loggedIn ? <Redirect to='/feed' /> : <Redirect to='/signin' />}</Route>\r\n      </Switch>\r\n\r\n      <EditProfilePopup\r\n        isOpen={isEditProfilePopupOpen}\r\n        onClose={closeAllPopups}\r\n        currentUser={currentUser}\r\n        onUpdateUser={handleUpdateUser}\r\n        submitButtonText={editSubmitButtonText}\r\n      />\r\n      <AddPlacePopup\r\n        isOpen={isAddPlacePopupOpen}\r\n        onClose={closeAllPopups}\r\n        currentUser={currentUser}\r\n        onAddPlace={handleAddPlace}\r\n        submitButtonText={addCardSubmitButtonText}\r\n      />\r\n\r\n      <EditAvatarPopup\r\n        isOpen={isEditAvatarPopupOpen}\r\n        onClose={closeAllPopups}\r\n        currentUser={currentUser}\r\n        onUpdateAvatar={handleUpdateAvatar}\r\n        submitButtonState={avatarUpdateSubmitButtonState}\r\n      />\r\n      <ImagePopup\r\n        name='pic-modal'\r\n        isOpen={isImagePopupOpen}\r\n        onClose={closeAllPopups}\r\n        card={selectedCard}\r\n      />\r\n    </CurrentUserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App.jsx';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.querySelector('#root')\r\n);"],"sourceRoot":""}